<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LINE 訊息費用計算 (純階梯版)</title>
    <style>
        :root { --line-green: #06C755; --bg-color: #f4f7f6; }
        body { font-family: -apple-system, sans-serif; background-color: var(--bg-color); margin: 0; display: flex; justify-content: center; padding: 20px; }
        .container { background: white; width: 100%; max-width: 400px; padding: 25px; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        h1 { color: var(--line-green); font-size: 20px; text-align: center; margin-bottom: 25px; }
        .input-group { margin-bottom: 20px; }
        label { display: block; font-weight: bold; margin-bottom: 8px; color: #333; }
        input { width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 10px; font-size: 18px; box-sizing: border-box; outline: none; }
        .result-box { background: #f9f9f9; padding: 15px; border-radius: 10px; border-left: 5px solid var(--line-green); margin-top: 10px; }
        .result-item { display: flex; justify-content: space-between; margin: 8px 0; font-size: 16px; }
        .result-value { font-weight: bold; color: #000; }
    </style>
</head>
<body>
<div class="container">
    <h1>LINE 訊息費用試算 (純階梯)</h1>
    <div class="input-group">
        <label>月訊息總數</label>
        <input type="number" id="msgCount" placeholder="輸入總數">
    </div>
    <div class="input-group">
        <label>預算金額</label>
        <input type="number" id="budget" placeholder="輸入預算">
    </div>
    <div class="result-box">
        <div class="result-item"><span>預估總金額</span><span class="result-value" id="resAmount">$ 0</span></div>
        <div class="result-item"><span>預估可發數量</span><span class="result-value" id="resCount">0 則</span></div>
    </div>
</div>
<script>
    const tiers = [
        { limit: 25000, price: 0.200 }, { limit: 35000, price: 0.165 },
        { limit: 45000, price: 0.154 }, { limit: 65000, price: 0.143 },
        { limit: 105000, price: 0.132 }, { limit: 185000, price: 0.121 },
        { limit: 345000, price: 0.1045 }, { limit: 665000, price: 0.1034 },
        { limit: 825000, price: 0.099 }, { limit: 1305000, price: 0.0946 },
        { limit: 2585000, price: 0.0858 }, { limit: 3525000, price: 0.077 },
        { limit: 5145000, price: 0.066 }, { limit: 8025000, price: 0.055 },
        { limit: 10265000, price: 0.0385 }, { limit: 20505000, price: 0.0187 },
        { limit: Infinity, price: 0.011 }
    ];
    const msgInput = document.getElementById('msgCount');
    const budgetInput = document.getElementById('budget');

    msgInput.addEventListener('input', () => {
        let count = parseFloat(msgInput.value) || 0;
        let cost = 0, lastLimit = 0;
        for (let t of tiers) {
            if (count <= lastLimit) break;
            cost += (Math.min(count, t.limit) - lastLimit) * t.price;
            lastLimit = t.limit;
        }
        document.getElementById('resAmount').innerText = `$ ${Math.round(cost).toLocaleString()}`;
    });

    budgetInput.addEventListener('input', () => {
        let available = parseFloat(budgetInput.value) || 0;
        let totalMsgs = 0, lastLimit = 0;
        for (let t of tiers) {
            let cap = t.limit - lastLimit;
            let maxCost = cap * t.price;
            if (available > maxCost) {
                totalMsgs += cap;
                available -= maxCost;
                lastLimit = t.limit;
            } else {
                totalMsgs += available / t.price;
                available = 0;
                break;
            }
        }
        document.getElementById('resCount').innerText = `${Math.floor(totalMsgs).toLocaleString()} 則`;
    });
</script>
</body>
</html>
