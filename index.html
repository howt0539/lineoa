<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LINE è¨Šæ¯è²»ç”¨è¨ˆç®—</title>
    <style>
        :root { --line-green: #06C755; --bg-color: #f4f7f6; --text-dark: #333; }
        body { font-family: -apple-system, sans-serif; background-color: var(--bg-color); margin: 0; display: flex; justify-content: center; padding: 20px 20px 40px 20px; }
        .container { background: white; width: 100%; max-width: 400px; padding: 25px; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        h1 { color: var(--line-green); font-size: 20px; text-align: center; margin-bottom: 25px; }
        .section { background: #f9f9f9; padding: 20px; border-radius: 15px; margin-bottom: 25px; border: 1px solid #eee; }
        .section-title { font-size: 14px; color: #666; margin-bottom: 15px; text-align: center; font-weight: bold; }
        .input-group { margin-bottom: 15px; }
        label { display: block; font-weight: bold; margin-bottom: 8px; color: var(--text-dark); }
        input { width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 10px; font-size: 18px; box-sizing: border-box; outline: none; }
        input:focus { border-color: var(--line-green); }
        .result-box { margin-top: 15px; border-top: 1px dashed #ccc; padding-top: 10px; }
        .result-item { display: flex; justify-content: space-between; margin: 8px 0; font-size: 16px; }
        .result-value { font-weight: bold; color: #000; font-size: 18px; }
        .highlight { color: var(--line-green); }
        
        .biz-footer { margin-top: 30px; padding: 20px; border-top: 2px solid #f4f4f4; background: #fff; text-align: center; }
        .biz-name { font-size: 18px; color: #000; font-weight: bold; margin-bottom: 10px; }
        .biz-link { display: block; font-size: 14px; color: #555; text-decoration: none; margin: 5px 0; }
        .biz-link strong { color: var(--line-green); }

        .details-btn { display: block; width: 100%; background: #eee; border: none; color: #444; padding: 12px; border-radius: 8px; margin-top: 10px; cursor: pointer; font-size: 14px; font-weight: bold; }
        #details { display: none; font-size: 12px; color: #666; margin-top: 15px; line-height: 1.6; background: #fff; padding: 15px; border-radius: 8px; border: 1px solid #ddd; }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th, td { border: 1px solid #eee; padding: 8px; text-align: left; }
        th { background: #f8f8f8; color: #333; }
    </style>
</head>
<body>

<div class="container">
    <h1>LINE è¨Šæ¯è²»ç”¨è©¦ç®—</h1>

    <div class="section">
        <div class="section-title">è¼¸å…¥è¨Šæ¯æ•¸ â” ç®—é‡‘é¡</div>
        <div class="input-group">
            <label>æ¬²ç™¼é€è¨Šæ¯ç¸½æ•¸</label>
            <input type="number" id="msgCount" placeholder="è«‹è¼¸å…¥è¨Šæ¯æ•¸é‡">
        </div>
        <div class="result-box">
            <div class="result-item"><span>é ä¼°ç¸½é‡‘é¡</span><span class="result-value highlight" id="resAmount">$ 0</span></div>
            <div class="result-item"><span>è¨Šæ¯å¹³å‡å–®åƒ¹</span><span class="result-value" id="resAvgPrice">$ 0</span></div>
        </div>
    </div>

    <div class="section">
        <div class="section-title">è¼¸å…¥é é ç®— â” ç®—æ•¸é‡</div>
        <div class="input-group">
            <label>æˆ‘çš„é ç®—ç¸½é¡</label>
            <input type="number" id="budget" placeholder="è«‹è¼¸å…¥é ç®—é‡‘é¡">
        </div>
        <div class="result-box">
            <div class="result-item"><span>å¯ç™¼é€ç¸½æ•¸é‡</span><span class="result-value highlight" id="resCount">0 å‰‡</span></div>
            <div class="result-item"><span>è¨Šæ¯å¹³å‡å–®åƒ¹</span><span class="result-value" id="resAvgMsgPrice">$ 0</span></div>
        </div>
    </div>

    <button class="details-btn" onclick="toggleDetails()">ğŸ“Š æŸ¥çœ‹å®Œæ•´éšæ¢¯è²»ç‡è¡¨</button>
    <div id="details">
        <b>éšæ¢¯å¼è¨ˆè²»è¦å‰‡ï¼š</b>
        <table>
            <thead><tr><th>ç´šè·æ•¸é‡ä¸Šé™</th><th>åŠ è³¼å–®åƒ¹</th></tr></thead>
            <tbody id="tierTableBody"></tbody>
        </table>
    </div>

    <div class="biz-footer">
        <div class="biz-name">é™³å“å©· Ashley</div>
        <a href="https://line.me/ti/p/~fly814c" class="biz-link">LINE ID: <strong>fly814c</strong></a>
        <a href="mailto:ashley-chen@taipeiads.com" class="biz-link">ashley-chen@taipeiads.com</a>
    </div>
</div>

<script>
    const tiers = [
        { limit: 25000, price: 0.200 }, { limit: 35000, price: 0.165 },
        { limit: 45000, price: 0.154 }, { limit: 65000, price: 0.143 },
        { limit: 105000, price: 0.132 }, { limit: 185000, price: 0.121 },
        { limit: 345000, price: 0.1045 }, { limit: 665000, price: 0.1034 },
        { limit: 825000, price: 0.099 }, { limit: 1305000, price: 0.0946 },
        { limit: 2585000, price: 0.0858 }, { limit: 3525000, price: 0.077 },
        { limit: 5145000, price: 0.066 }, { limit: 8025000, price: 0.055 },
        { limit: 10265000, price: 0.0385 }, { limit: 20505000, price: 0.0187 },
        { limit: Infinity, price: 0.011 }
    ];

    const tbody = document.getElementById('tierTableBody');
    tiers.forEach(t => {
        const row = `<tr><td>${t.limit === Infinity ? 'ç„¡é™' : t.limit.toLocaleString() + ' å‰‡'}</td><td>$${t.price}</td></tr>`;
        tbody.innerHTML += row;
    });

    const msgInput = document.getElementById('msgCount');
    const budgetInput = document.getElementById('budget');

    msgInput.addEventListener('input', () => {
        budgetInput.value = ""; 
        let count = parseFloat(msgInput.value) || 0;
        let cost = 0, lastLimit = 0;
        for (let t of tiers) {
            if (count <= lastLimit) break;
            cost += (Math.min(count, t.limit) - lastLimit) * t.price;
            lastLimit = t.limit;
        }
        document.getElementById('resAmount').innerText = `$ ${Math.round(cost).toLocaleString()}`;
        document.getElementById('resAvgPrice').innerText = count > 0 ? `$ ${(cost / count).toFixed(4)}` : "$ 0";
    });

    budgetInput.addEventListener('input', () => {
        msgInput.value = ""; 
        let available = parseFloat(budgetInput.value) || 0;
        let totalMsgs = 0, lastLimit = 0;
        let originalBudget = available;
        for (let t of tiers) {
            let cap = t.limit - lastLimit;
            let maxCost = cap * t.price;
            if (available > maxCost) {
                totalMsgs += cap;
                available -= maxCost;
                lastLimit = t.limit;
            } else {
                totalMsgs += available / t.price;
                available = 0;
                break;
            }
        }
        document.getElementById('resCount').innerText = `${Math.floor(totalMsgs).toLocaleString()} å‰‡`;
        document.getElementById('resAvgMsgPrice').innerText = totalMsgs > 0 ? `$ ${(originalBudget / totalMsgs).toFixed(4)}` : "$ 0";
    });

    function toggleDetails() {
        const d = document.getElementById('details');
        d.style.display = d.style.display === 'block' ? 'none' : 'block';
    }
</script>
</body>
</html>
