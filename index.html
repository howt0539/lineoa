<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LINE è¨Šæ¯è²»ç”¨è¨ˆç®— (ä¸€å°ä¸€ç²¾ç¢ºç‰ˆ)</title>
    <style>
        :root { --line-green: #06C755; --bg-color: #f4f7f6; }
        body { font-family: -apple-system, sans-serif; background-color: var(--bg-color); margin: 0; display: flex; justify-content: center; padding: 20px; }
        .container { background: white; width: 100%; max-width: 400px; padding: 25px; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        h1 { color: var(--line-green); font-size: 20px; text-align: center; margin-bottom: 25px; }
        .section { background: #f9f9f9; padding: 20px; border-radius: 15px; margin-bottom: 25px; border: 1px solid #eee; }
        .section-title { font-size: 14px; color: #666; margin-bottom: 15px; text-align: center; font-weight: bold; text-transform: uppercase; letter-spacing: 1px; }
        .input-group { margin-bottom: 15px; }
        label { display: block; font-weight: bold; margin-bottom: 8px; color: #333; }
        input { width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 10px; font-size: 18px; box-sizing: border-box; outline: none; }
        input:focus { border-color: var(--line-green); }
        .result-box { margin-top: 15px; border-top: 1px dashed #ccc; padding-top: 10px; }
        .result-item { display: flex; justify-content: space-between; margin: 8px 0; font-size: 16px; }
        .result-label { color: #555; }
        .result-value { font-weight: bold; color: #000; font-size: 18px; }
        .details-btn { display: block; width: 100%; background: #eee; border: none; color: #444; padding: 10px; border-radius: 8px; margin-top: 10px; cursor: pointer; font-size: 14px; font-weight: bold; }
        #details { display: none; font-size: 13px; color: #666; margin-top: 15px; line-height: 1.6; background: #fff; padding: 15px; border-radius: 8px; border: 1px solid #ddd; }
        .highlight { color: var(--line-green); }
    </style>
</head>
<body>

<div class="container">
    <h1>LINE è¨Šæ¯è²»ç”¨è¨ˆç®—</h1>

    <div class="section">
        <div class="section-title">è¼¸å…¥è¨Šæ¯æ•¸ â” ç®—é‡‘é¡</div>
        <div class="input-group">
            <label>æ¬²ç™¼é€è¨Šæ¯ç¸½æ•¸</label>
            <input type="number" id="msgCount" placeholder="è«‹è¼¸å…¥è¨Šæ¯æ•¸é‡">
        </div>
        <div class="result-box" id="resBoxA">
            <div class="result-item"><span class="result-label">é ä¼°ç¸½é‡‘é¡</span><span class="result-value highlight" id="resAmount">$ 0</span></div>
            <div class="result-item"><span class="result-label">å¹³å‡æ¯å‰‡å–®åƒ¹</span><span class="result-value" id="resAvgPrice">$ 0</span></div>
        </div>
    </div>

    <div class="section">
        <div class="section-title">è¼¸å…¥é ç®— â” ç®—æ•¸é‡</div>
        <div class="input-group">
            <label>æˆ‘çš„é ç®—ç¸½é¡</label>
            <input type="number" id="budget" placeholder="è«‹è¼¸å…¥é‡‘é¡">
        </div>
        <div class="result-box" id="resBoxB">
            <div class="result-item"><span class="result-label">å¯ç™¼é€ç¸½æ•¸é‡</span><span class="result-value highlight" id="resCount">0 å‰‡</span></div>
            <div class="result-item"><span class="result-label">$1 å¯ç™¼é€å‰‡æ•¸</span><span class="result-value" id="resAvgMsg">0 å‰‡</span></div>
        </div>
    </div>

    <button class="details-btn" onclick="toggleDetails()">ğŸ“Š æŸ¥çœ‹è¨ˆç®—è¦å‰‡èˆ‡éšæ¢¯å–®åƒ¹</button>
    <div id="details">
        <b>éšæ¢¯å¼è¨ˆè²» (ç´”è¨Šæ¯è²»ï¼Œç„¡æœˆè²»)ï¼š</b><br>
        1. 0 - 25,000 å‰‡ï¼š$0.200<br>
        2. 25,001 - 35,000 å‰‡ï¼š$0.165<br>
        3. 35,001 - 45,000 å‰‡ï¼š$0.154<br>
        4. 45,001 - 65,000 å‰‡ï¼š$0.143<br>
        5. 65,001 - 105,000 å‰‡ï¼š$0.132<br>
        6. 105,001 - 185,000 å‰‡ï¼š$0.121<br>
        7. 185,001 - 345,000 å‰‡ï¼š$0.1045<br>
        ...ä»¥æ­¤é¡æ¨ (ä¾ M-Q æ¬„æ•¸æ“š)
    </div>
</div>

<script>
    const tiers = [
        { limit: 25000, price: 0.200 }, { limit: 35000, price: 0.165 },
        { limit: 45000, price: 0.154 }, { limit: 65000, price: 0.143 },
        { limit: 105000, price: 0.132 }, { limit: 185000, price: 0.121 },
        { limit: 345000, price: 0.1045 }, { limit: 665000, price: 0.1034 },
        { limit: 825000, price: 0.099 }, { limit: 1305000, price: 0.0946 },
        { limit: 2585000, price: 0.0858 }, { limit: 3525000, price: 0.077 },
        { limit: 5145000, price: 0.066 }, { limit: 8025000, price: 0.055 },
        { limit: 10265000, price: 0.0385 }, { limit: 20505000, price: 0.0187 },
        { limit: Infinity, price: 0.011 }
    ];

    const msgInput = document.getElementById('msgCount');
    const budgetInput = document.getElementById('budget');

    // æ ¼å¼åŒ–æ•¸å­—
    const fmt = (v) => Math.round(v).toLocaleString();

    // æ¨¡å¼ä¸€ï¼šè¼¸å…¥æ•¸é‡ -> ç®—éŒ¢
    msgInput.addEventListener('input', () => {
        budgetInput.value = ""; // æ¸…ç©ºå¦ä¸€é‚Š
        let count = parseFloat(msgInput.value) || 0;
        let cost = 0, lastLimit = 0;
        for (let t of tiers) {
            if (count <= lastLimit) break;
            cost += (Math.min(count, t.limit) - lastLimit) * t.price;
            lastLimit = t.limit;
        }
        document.getElementById('resAmount').innerText = `$ ${fmt(cost)}`;
        document.getElementById('resAvgPrice').innerText = count > 0 ? `$ ${(cost / count).toFixed(4)}` : "$ 0";
    });

    // æ¨¡å¼äºŒï¼šè¼¸å…¥éŒ¢ -> ç®—æ•¸é‡
    budgetInput.addEventListener('input', () => {
        msgInput.value = ""; // æ¸…ç©ºå¦ä¸€é‚Š
        let available = parseFloat(budgetInput.value) || 0;
        let totalMsgs = 0, lastLimit = 0;
        let originalBudget = available;
        for (let t of tiers) {
            let cap = t.limit - lastLimit;
            let maxCost = cap * t.price;
            if (available > maxCost) {
                totalMsgs += cap;
                available -= maxCost;
                lastLimit = t.limit;
            } else {
                totalMsgs += available / t.price;
                available = 0;
                break;
            }
        }
        document.getElementById('resCount').innerText = `${Math.floor(totalMsgs).toLocaleString()} å‰‡`;
        document.getElementById('resAvgMsg').innerText = originalBudget > 0 ? `${(totalMsgs / originalBudget).toFixed(2)} å‰‡` : "0 å‰‡";
    });

    function toggleDetails() {
        const d = document.getElementById('details');
        d.style.display = d.style.display === 'block' ? 'none' : 'block';
    }
</script>
</body>
</html>
